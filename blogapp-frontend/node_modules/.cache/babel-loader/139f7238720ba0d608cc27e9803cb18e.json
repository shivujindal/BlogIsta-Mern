{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win 10\\\\Desktop\\\\BlogIsta Project\\\\blogapp-frontend\\\\src\\\\compenents\\\\blog.component.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Card, CardImg, CardBody, CardSubtitle, CardTitle, CardText, Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalFooter, ModalBody, CardFooter } from \"reactstrap\";\nimport ReactLoading from \"react-loading\";\nimport { useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCalendar, faHeart, faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\nexport default class blog extends Component {\n  constructor(props) {\n    super(props);\n    this.toggleModal = this.toggleModal.bind(this);\n    this.onbodyChange = this.onbodyChange.bind(this);\n    this.ontitleChange = this.ontitleChange.bind(this);\n    this.onimgChange = this.onimgChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.deleteBlog = this.deleteBlog.bind(this);\n    this.state = {\n      image: \"\",\n      title: \"\",\n      body: \"\",\n      author: \"\",\n      data: \"\",\n      likes: [],\n      isModalOpen: false,\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    // console.log(this.props.location);\n    if (this.props.location.blog) {\n      this.setState({\n        image: this.props.location.blog.blog.image,\n        title: this.props.location.blog.blog.title,\n        body: this.props.location.blog.blog.body,\n        author: this.props.location.blog.blog.author,\n        date: this.props.location.blog.blog.date,\n        likes: this.props.location.blog.blog.likes,\n        loaded: true\n      });\n    }\n\n    if (!this.props.location.blog) {\n      axios.get(`/api/blogs/${this.props.match.params.id}`).then(({\n        data\n      }) => {\n        this.setState({\n          image: data.image,\n          title: data.title,\n          body: data.body,\n          author: data.author,\n          date: data.date,\n          likes: data.likes,\n          loaded: true\n        });\n      }).catch(err => console.log({\n        err: err\n      }));\n    }\n  }\n\n  toggleModal() {\n    this.setState({\n      isModalOpen: !this.state.isModalOpen\n    });\n  }\n\n  ontitleChange(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  onbodyChange(e) {\n    this.setState({\n      body: e.target.value\n    });\n  }\n\n  onimgChange(e) {\n    this.setState({\n      image: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const updatedBlog = {\n      title: this.state.title,\n      body: this.state.body,\n      image: this.state.image\n    };\n    axios.put(`/api/blogs/${this.props.match.params.id}`, updatedBlog).then(({\n      data: {\n        blog\n      }\n    }) => {\n      // this.setState({\n      //     title: blog.title,\n      //     image: blog.image,\n      //     body: blog.body,\n      //     date: blog.date,\n      // });\n      console.log(blog);\n    }).catch(err => console.log(err));\n    this.toggleModal();\n  }\n\n  deleteBlog() {\n    axios.delete(`/api/blogs/${this.props.match.params.id}`).then(({\n      data\n    }) => {\n      console.log(data);\n      window.location = \"/\";\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pt-2 px-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mr-auto ml-0 mb-4 mt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      size: \"lg\",\n      onClick: () => {\n        window.location.href = \"/\";\n      },\n      style: {\n        width: \"60px\",\n        height: \"60px\",\n        borderRadius: \"50%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faArrowLeft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }))), !this.state.loaded ? /*#__PURE__*/React.createElement(ReactLoading, {\n      type: \"spin\",\n      color: \"orange\",\n      height: \"100vh\",\n      width: \"40%\",\n      className: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(Card, {\n      id: \"blog\",\n      className: \"p-2 col-12 singleBlog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardImg, {\n      src: this.state.image,\n      alt: \"Card image cap\",\n      className: \"img-thumbnail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      className: \"text-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, this.state.title, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"float-right text-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 37\n      }\n    }, \"-\", /*#__PURE__*/React.createElement(\"em\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 41\n      }\n    }, \"@\", this.state.author.username)))), this.state.date !== \"\" && /*#__PURE__*/React.createElement(CardSubtitle, {\n      className: \"text-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCalendar,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 37\n      }\n    }), new Intl.DateTimeFormat(\"en-US\", {\n      month: \"long\",\n      day: \"numeric\",\n      year: \"numeric\",\n      hour: \"numeric\",\n      minute: \"numeric\"\n    }).format(Date.parse(this.state.date)), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"text-danger\",\n      icon: faHeart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }), \" \", this.state.likes.length)), /*#__PURE__*/React.createElement(CardText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 33\n      }\n    }), this.state.body)), /*#__PURE__*/React.createElement(CardFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, this.props.user !== null && this.props.user._id === this.state.author.id && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      className: \"p-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"btn btn-danger mr-1\",\n      style: {\n        width: \"48%\"\n      },\n      onClick: this.deleteBlog,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 41\n      }\n    }, \"Delete\"), \" \", /*#__PURE__*/React.createElement(Button, {\n      className: \"btn btn-warning ml-1\",\n      style: {\n        width: \"48%\"\n      },\n      onClick: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 41\n      }\n    }, \"Edit\")))), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.isModalOpen,\n      fade: false,\n      toggle: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, \"Add a blog\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 33\n      }\n    }, \"title\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"title\",\n      onChange: this.ontitleChange,\n      value: this.state.title,\n      name: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"imageURL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 33\n      }\n    }, \"imageURL\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"imageURL\",\n      onChange: this.onimgChange,\n      value: this.state.image,\n      name: \"imageURL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 33\n      }\n    }, \"body\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"textarea\",\n      id: \"body\",\n      onChange: this.onbodyChange,\n      value: this.state.body,\n      name: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(ModalFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      value: \"submit\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 29\n      }\n    }, \"UPDATE BLOG\")))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/win 10/Desktop/BlogIsta Project/blogapp-frontend/src/compenents/blog.component.js"],"names":["React","Component","axios","Card","CardImg","CardBody","CardSubtitle","CardTitle","CardText","Button","Form","FormGroup","Label","Input","Modal","ModalHeader","ModalFooter","ModalBody","CardFooter","ReactLoading","useHistory","FontAwesomeIcon","faCalendar","faHeart","faArrowLeft","blog","constructor","props","toggleModal","bind","onbodyChange","ontitleChange","onimgChange","onSubmit","deleteBlog","state","image","title","body","author","data","likes","isModalOpen","loaded","componentDidMount","location","setState","date","get","match","params","id","then","catch","err","console","log","e","target","value","preventDefault","updatedBlog","put","delete","window","render","href","width","height","borderRadius","username","Intl","DateTimeFormat","month","day","year","hour","minute","format","Date","parse","length","user","_id","display"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACIC,IADJ,EAEIC,OAFJ,EAGIC,QAHJ,EAIIC,YAJJ,EAKIC,SALJ,EAMIC,QANJ,EAOIC,MAPJ,EAQIC,IARJ,EASIC,SATJ,EAUIC,KAVJ,EAWIC,KAXJ,EAYIC,KAZJ,EAaIC,WAbJ,EAcIC,WAdJ,EAeIC,SAfJ,EAgBIC,UAhBJ,QAiBO,YAjBP;AAkBA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SACIC,UADJ,EAEIC,OAFJ,EAGIC,WAHJ,QAIO,mCAJP;AAKA,eAAe,MAAMC,IAAN,SAAmBxB,SAAnB,CAA6B;AACxCyB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,WAAL,GAAmB,KAAKA,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKI,QAAL,GAAgB,KAAKA,QAAL,CAAcJ,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKK,UAAL,GAAkB,KAAKA,UAAL,CAAgBL,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKM,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,IAAI,EAAE,EAHG;AAITC,MAAAA,MAAM,EAAE,EAJC;AAKTC,MAAAA,IAAI,EAAE,EALG;AAMTC,MAAAA,KAAK,EAAE,EANE;AAOTC,MAAAA,WAAW,EAAE,KAPJ;AAQTC,MAAAA,MAAM,EAAE;AARC,KAAb;AAUH;;AACDC,EAAAA,iBAAiB,GAAG;AAChB;AACA,QAAI,KAAKjB,KAAL,CAAWkB,QAAX,CAAoBpB,IAAxB,EAA8B;AAC1B,WAAKqB,QAAL,CAAc;AACVV,QAAAA,KAAK,EAAE,KAAKT,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8BW,KAD3B;AAEVC,QAAAA,KAAK,EAAE,KAAKV,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8BY,KAF3B;AAGVC,QAAAA,IAAI,EAAE,KAAKX,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8Ba,IAH1B;AAIVC,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8Bc,MAJ5B;AAKVQ,QAAAA,IAAI,EAAE,KAAKpB,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8BsB,IAL1B;AAMVN,QAAAA,KAAK,EAAE,KAAKd,KAAL,CAAWkB,QAAX,CAAoBpB,IAApB,CAAyBA,IAAzB,CAA8BgB,KAN3B;AAOVE,QAAAA,MAAM,EAAE;AAPE,OAAd;AASH;;AACD,QAAI,CAAC,KAAKhB,KAAL,CAAWkB,QAAX,CAAoBpB,IAAzB,EAA+B;AAC3BvB,MAAAA,KAAK,CACA8C,GADL,CACU,cAAa,KAAKrB,KAAL,CAAWsB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAG,EADlD,EAEKC,IAFL,CAEU,CAAC;AAAEZ,QAAAA;AAAF,OAAD,KAAc;AAChB,aAAKM,QAAL,CAAc;AACVV,UAAAA,KAAK,EAAEI,IAAI,CAACJ,KADF;AAEVC,UAAAA,KAAK,EAAEG,IAAI,CAACH,KAFF;AAGVC,UAAAA,IAAI,EAAEE,IAAI,CAACF,IAHD;AAIVC,UAAAA,MAAM,EAAEC,IAAI,CAACD,MAJH;AAKVQ,UAAAA,IAAI,EAAEP,IAAI,CAACO,IALD;AAMVN,UAAAA,KAAK,EAAED,IAAI,CAACC,KANF;AAOVE,UAAAA,MAAM,EAAE;AAPE,SAAd;AASH,OAZL,EAaKU,KAbL,CAaYC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY;AAAEF,QAAAA,GAAG,EAAEA;AAAP,OAAZ,CAbpB;AAcH;AACJ;;AACD1B,EAAAA,WAAW,GAAG;AACV,SAAKkB,QAAL,CAAc;AACVJ,MAAAA,WAAW,EAAE,CAAC,KAAKP,KAAL,CAAWO;AADf,KAAd;AAGH;;AACDX,EAAAA,aAAa,CAAC0B,CAAD,EAAI;AACb,SAAKX,QAAL,CAAc;AACVT,MAAAA,KAAK,EAAEoB,CAAC,CAACC,MAAF,CAASC;AADN,KAAd;AAGH;;AACD7B,EAAAA,YAAY,CAAC2B,CAAD,EAAI;AACZ,SAAKX,QAAL,CAAc;AACVR,MAAAA,IAAI,EAAEmB,CAAC,CAACC,MAAF,CAASC;AADL,KAAd;AAGH;;AACD3B,EAAAA,WAAW,CAACyB,CAAD,EAAI;AACX,SAAKX,QAAL,CAAc;AACVV,MAAAA,KAAK,EAAEqB,CAAC,CAACC,MAAF,CAASC;AADN,KAAd;AAGH;;AACD1B,EAAAA,QAAQ,CAACwB,CAAD,EAAI;AACRA,IAAAA,CAAC,CAACG,cAAF;AACA,UAAMC,WAAW,GAAG;AAChBxB,MAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KADF;AAEhBC,MAAAA,IAAI,EAAE,KAAKH,KAAL,CAAWG,IAFD;AAGhBF,MAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC;AAHF,KAApB;AAKAlC,IAAAA,KAAK,CACA4D,GADL,CACU,cAAa,KAAKnC,KAAL,CAAWsB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAG,EADlD,EACqDU,WADrD,EAEKT,IAFL,CAEU,CAAC;AAAEZ,MAAAA,IAAI,EAAE;AAAEf,QAAAA;AAAF;AAAR,KAAD,KAAwB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA8B,MAAAA,OAAO,CAACC,GAAR,CAAY/B,IAAZ;AACH,KAVL,EAWK4B,KAXL,CAWYC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAXpB;AAaA,SAAK1B,WAAL;AACH;;AACDM,EAAAA,UAAU,GAAG;AACThC,IAAAA,KAAK,CACA6D,MADL,CACa,cAAa,KAAKpC,KAAL,CAAWsB,KAAX,CAAiBC,MAAjB,CAAwBC,EAAG,EADrD,EAEKC,IAFL,CAEU,CAAC;AAAEZ,MAAAA;AAAF,KAAD,KAAc;AAChBe,MAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ;AACAwB,MAAAA,MAAM,CAACnB,QAAP,GAAkB,GAAlB;AACH,KALL,EAMKQ,KANL,CAMYC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANpB;AAOH;;AACDW,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AACI,MAAA,KAAK,EAAC,SADV;AAEI,MAAA,IAAI,EAAC,IAFT;AAGI,MAAA,OAAO,EAAE,MAAM;AACXD,QAAAA,MAAM,CAACnB,QAAP,CAAgBqB,IAAhB,GAAuB,GAAvB;AACH,OALL;AAMI,MAAA,KAAK,EAAE;AACHC,QAAAA,KAAK,EAAE,MADJ;AAEHC,QAAAA,MAAM,EAAE,MAFL;AAGHC,QAAAA,YAAY,EAAE;AAHX,OANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAWI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE7C,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXJ,CADJ,CADJ,EAgBK,CAAC,KAAKW,KAAL,CAAWQ,MAAZ,gBACG,oBAAC,YAAD;AACI,MAAA,IAAI,EAAE,MADV;AAEI,MAAA,KAAK,EAAE,QAFX;AAGI,MAAA,MAAM,EAAE,OAHZ;AAII,MAAA,KAAK,EAAE,KAJX;AAKI,MAAA,SAAS,EAAC,SALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH,gBASG,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAgB,MAAA,SAAS,EAAC,uBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AACI,MAAA,GAAG,EAAE,KAAKR,KAAL,CAAWC,KADpB;AAEI,MAAA,GAAG,EAAC,gBAFR;AAGI,MAAA,SAAS,EAAC,eAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAMI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKD,KAAL,CAAWE,KADhB,eAEI;AAAM,MAAA,SAAS,EAAC,4BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,GADL,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAM,KAAKF,KAAL,CAAWI,MAAX,CAAkB+B,QAAxB,CAFJ,CAFJ,CADJ,CADJ,EAUK,KAAKnC,KAAL,CAAWY,IAAX,KAAoB,EAApB,iBACG,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAC,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AACI,MAAA,IAAI,EAAEzB,UADV;AAEI,MAAA,SAAS,EAAC,MAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAKK,IAAIiD,IAAI,CAACC,cAAT,CAAwB,OAAxB,EAAiC;AAC9BC,MAAAA,KAAK,EAAE,MADuB;AAE9BC,MAAAA,GAAG,EAAE,SAFyB;AAG9BC,MAAAA,IAAI,EAAE,SAHwB;AAI9BC,MAAAA,IAAI,EAAE,SAJwB;AAK9BC,MAAAA,MAAM,EAAE;AALsB,KAAjC,EAMEC,MANF,CAMSC,IAAI,CAACC,KAAL,CAAW,KAAK7C,KAAL,CAAWY,IAAtB,CANT,CALL,eAYI;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AACI,MAAA,SAAS,EAAC,aADd;AAEI,MAAA,IAAI,EAAExB,OAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAIO,GAJP,EAKK,KAAKY,KAAL,CAAWM,KAAX,CAAiBwC,MALtB,CAZJ,CAXR,eAgCI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAK9C,KAAL,CAAWG,IAFhB,CAhCJ,CANJ,eA2CI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKX,KAAL,CAAWuD,IAAX,KAAoB,IAApB,IACG,KAAKvD,KAAL,CAAWuD,IAAX,CAAgBC,GAAhB,KACI,KAAKhD,KAAL,CAAWI,MAAX,CAAkBY,EAFzB,iBAGO;AACI,MAAA,KAAK,EAAE;AAAEiC,QAAAA,OAAO,EAAE;AAAX,OADX;AAEI,MAAA,SAAS,EAAC,KAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGI,oBAAC,MAAD;AACI,MAAA,SAAS,EAAC,qBADd;AAEI,MAAA,KAAK,EAAE;AAAEjB,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAE,KAAKjC,UAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,EAQc,GARd,eASI,oBAAC,MAAD;AACI,MAAA,SAAS,EAAC,sBADd;AAEI,MAAA,KAAK,EAAE;AAAEiC,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAE,KAAKvC,WAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,CAJZ,CA3CJ,CAzBR,eA4FI,oBAAC,KAAD;AACI,MAAA,MAAM,EAAE,KAAKO,KAAL,CAAWO,WADvB;AAEI,MAAA,IAAI,EAAE,KAFV;AAGI,MAAA,MAAM,EAAE,KAAKd,WAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAII,oBAAC,WAAD;AAAa,MAAA,MAAM,EAAE,KAAKA,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,eAOI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKK,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI,oBAAC,KAAD;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,EAAE,EAAC,OAFP;AAGI,MAAA,QAAQ,EAAE,KAAKF,aAHnB;AAII,MAAA,KAAK,EAAE,KAAKI,KAAL,CAAWE,KAJtB;AAKI,MAAA,IAAI,EAAC,OALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAWI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,oBAAC,KAAD;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,EAAE,EAAC,UAFP;AAGI,MAAA,QAAQ,EAAE,KAAKL,WAHnB;AAII,MAAA,KAAK,EAAE,KAAKG,KAAL,CAAWC,KAJtB;AAKI,MAAA,IAAI,EAAC,UALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAXJ,eAqBI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,oBAAC,KAAD;AACI,MAAA,IAAI,EAAC,UADT;AAEI,MAAA,EAAE,EAAC,MAFP;AAGI,MAAA,QAAQ,EAAE,KAAKN,YAHnB;AAII,MAAA,KAAK,EAAE,KAAKK,KAAL,CAAWG,IAJtB;AAKI,MAAA,IAAI,EAAC,MALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CArBJ,CADJ,eAiCI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AACI,MAAA,IAAI,EAAC,QADT;AAEI,MAAA,KAAK,EAAC,QAFV;AAGI,MAAA,KAAK,EAAC,SAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CAjCJ,CAPJ,CA5FJ,CADJ;AAiJH;;AAvPuC","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {\n    Card,\n    CardImg,\n    CardBody,\n    CardSubtitle,\n    CardTitle,\n    CardText,\n    Button,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n    Modal,\n    ModalHeader,\n    ModalFooter,\n    ModalBody,\n    CardFooter,\n} from \"reactstrap\";\nimport ReactLoading from \"react-loading\";\nimport { useHistory } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n    faCalendar,\n    faHeart,\n    faArrowLeft,\n} from \"@fortawesome/free-solid-svg-icons\";\nexport default class blog extends Component {\n    constructor(props) {\n        super(props);\n        this.toggleModal = this.toggleModal.bind(this);\n        this.onbodyChange = this.onbodyChange.bind(this);\n        this.ontitleChange = this.ontitleChange.bind(this);\n        this.onimgChange = this.onimgChange.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.deleteBlog = this.deleteBlog.bind(this);\n        this.state = {\n            image: \"\",\n            title: \"\",\n            body: \"\",\n            author: \"\",\n            data: \"\",\n            likes: [],\n            isModalOpen: false,\n            loaded: false,\n        };\n    }\n    componentDidMount() {\n        // console.log(this.props.location);\n        if (this.props.location.blog) {\n            this.setState({\n                image: this.props.location.blog.blog.image,\n                title: this.props.location.blog.blog.title,\n                body: this.props.location.blog.blog.body,\n                author: this.props.location.blog.blog.author,\n                date: this.props.location.blog.blog.date,\n                likes: this.props.location.blog.blog.likes,\n                loaded: true,\n            });\n        }\n        if (!this.props.location.blog) {\n            axios\n                .get(`/api/blogs/${this.props.match.params.id}`)\n                .then(({ data }) => {\n                    this.setState({\n                        image: data.image,\n                        title: data.title,\n                        body: data.body,\n                        author: data.author,\n                        date: data.date,\n                        likes: data.likes,\n                        loaded: true,\n                    });\n                })\n                .catch((err) => console.log({ err: err }));\n        }\n    }\n    toggleModal() {\n        this.setState({\n            isModalOpen: !this.state.isModalOpen,\n        });\n    }\n    ontitleChange(e) {\n        this.setState({\n            title: e.target.value,\n        });\n    }\n    onbodyChange(e) {\n        this.setState({\n            body: e.target.value,\n        });\n    }\n    onimgChange(e) {\n        this.setState({\n            image: e.target.value,\n        });\n    }\n    onSubmit(e) {\n        e.preventDefault();\n        const updatedBlog = {\n            title: this.state.title,\n            body: this.state.body,\n            image: this.state.image,\n        };\n        axios\n            .put(`/api/blogs/${this.props.match.params.id}`, updatedBlog)\n            .then(({ data: { blog } }) => {\n                // this.setState({\n                //     title: blog.title,\n                //     image: blog.image,\n                //     body: blog.body,\n                //     date: blog.date,\n                // });\n                console.log(blog);\n            })\n            .catch((err) => console.log(err));\n\n        this.toggleModal();\n    }\n    deleteBlog() {\n        axios\n            .delete(`/api/blogs/${this.props.match.params.id}`)\n            .then(({ data }) => {\n                console.log(data);\n                window.location = \"/\";\n            })\n            .catch((err) => console.log(err));\n    }\n    render() {\n        return (\n            <div className='pt-2 px-3'>\n                <div className='row mr-auto ml-0 mb-4 mt-0'>\n                    <Button\n                        color='primary'\n                        size='lg'\n                        onClick={() => {\n                            window.location.href = \"/\";\n                        }}\n                        style={{\n                            width: \"60px\",\n                            height: \"60px\",\n                            borderRadius: \"50%\",\n                        }}>\n                        <FontAwesomeIcon icon={faArrowLeft} />\n                    </Button>\n                </div>\n                {!this.state.loaded ? (\n                    <ReactLoading\n                        type={\"spin\"}\n                        color={\"orange\"}\n                        height={\"100vh\"}\n                        width={\"40%\"}\n                        className='loading'\n                    />\n                ) : (\n                    <Card id='blog' className='p-2 col-12 singleBlog'>\n                        <CardImg\n                            src={this.state.image}\n                            alt='Card image cap'\n                            className='img-thumbnail'\n                        />\n                        <CardBody>\n                            <CardTitle className='text-primary'>\n                                <h5>\n                                    {this.state.title}\n                                    <span className='float-right text-secondary'>\n                                        {\"-\"}\n                                        <em>@{this.state.author.username}</em>\n                                    </span>\n                                </h5>\n                            </CardTitle>\n                            {this.state.date !== \"\" && (\n                                <CardSubtitle className='text-dark'>\n                                    <FontAwesomeIcon\n                                        icon={faCalendar}\n                                        className='mr-2'\n                                    />\n                                    {new Intl.DateTimeFormat(\"en-US\", {\n                                        month: \"long\",\n                                        day: \"numeric\",\n                                        year: \"numeric\",\n                                        hour: \"numeric\",\n                                        minute: \"numeric\",\n                                    }).format(Date.parse(this.state.date))}\n                                    <span className='float-right'>\n                                        <FontAwesomeIcon\n                                            className='text-danger'\n                                            icon={faHeart}\n                                        />{\" \"}\n                                        {this.state.likes.length}\n                                    </span>\n                                </CardSubtitle>\n                            )}\n                            <CardText>\n                                <br />\n                                {this.state.body}\n                            </CardText>\n                        </CardBody>\n                        <CardFooter>\n                            {this.props.user !== null &&\n                                this.props.user._id ===\n                                    this.state.author.id && (\n                                    <div\n                                        style={{ display: \"flex\" }}\n                                        className='p-1'>\n                                        <Button\n                                            className='btn btn-danger mr-1'\n                                            style={{ width: \"48%\" }}\n                                            onClick={this.deleteBlog}>\n                                            Delete\n                                        </Button>{\" \"}\n                                        <Button\n                                            className='btn btn-warning ml-1'\n                                            style={{ width: \"48%\" }}\n                                            onClick={this.toggleModal}>\n                                            Edit\n                                        </Button>\n                                    </div>\n                                )}\n                        </CardFooter>\n                    </Card>\n                )}\n                <Modal\n                    isOpen={this.state.isModalOpen}\n                    fade={false}\n                    toggle={this.toggleModal}>\n                    <ModalHeader toggle={this.toggleModal}>\n                        Add a blog\n                    </ModalHeader>\n                    <Form onSubmit={this.onSubmit}>\n                        <ModalBody>\n                            <FormGroup>\n                                <Label htmlFor='title'>title</Label>\n                                <Input\n                                    type='text'\n                                    id='title'\n                                    onChange={this.ontitleChange}\n                                    value={this.state.title}\n                                    name='title'\n                                />\n                            </FormGroup>\n                            <FormGroup>\n                                <Label htmlFor='imageURL'>imageURL</Label>\n                                <Input\n                                    type='text'\n                                    id='imageURL'\n                                    onChange={this.onimgChange}\n                                    value={this.state.image}\n                                    name='imageURL'\n                                />\n                            </FormGroup>\n                            <FormGroup>\n                                <Label htmlFor='body'>body</Label>\n                                <Input\n                                    type='textarea'\n                                    id='body'\n                                    onChange={this.onbodyChange}\n                                    value={this.state.body}\n                                    name='body'\n                                />\n                            </FormGroup>\n                        </ModalBody>\n                        <ModalFooter>\n                            <Button\n                                type='submit'\n                                value='submit'\n                                color='primary'>\n                                UPDATE BLOG\n                            </Button>\n                        </ModalFooter>\n                    </Form>\n                </Modal>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}