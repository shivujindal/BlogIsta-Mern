{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\win 10\\\\Desktop\\\\BlogIsta Project\\\\blogapp-frontend\\\\src\\\\compenents\\\\login.component.js\";\nimport React, { Component } from \"react\";\nimport { Label, Form, Button, FormGroup, Input, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from \"reactstrap\";\nimport axios from \"axios\";\nexport default class login extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onChangeUsername = this.onChangeUsername.bind(this);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.toggleModal = this.toggleModal.bind(this);\n    this.toggleError = this.toggleError.bind(this);\n    this.addUser = this.addUser.bind(this);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      alert: false,\n      isModalOpen: false,\n      errMessage: \"\",\n      alertCol: \"danger\"\n    };\n  }\n\n  onChangeUsername(e) {\n    this.setState({\n      username: e.target.value\n    });\n  }\n\n  onChangePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  toggleModal() {\n    this.setState({\n      isModalOpen: !this.state.isModalOpen\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const user = {\n      username: this.state.username,\n      password: this.state.password\n    }; // console.log(this.props)x\n\n    axios.post(\"/api/users/login\", user).then(res => {\n      this.props.updateUser(res.data.user).then(() => {\n        window.location = \"/\";\n      });\n    }).catch(err => {\n      var _err$response, _err$response$data, _err$response$data$er;\n\n      console.log(err.response);\n      let errMess = \"\";\n      errMess = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$er = _err$response$data.err) === null || _err$response$data$er === void 0 ? void 0 : _err$response$data$er.name;\n      if (errMess === undefined) errMess = \"Something went wrong\";else if (errMess === \"IncorrectUsernameError\") errMess = \"Incorrect Username\";else if (errMess === \"IncorrectPasswordError\") errMess = \"Incorrect Password\";\n      this.setState({\n        alert: true,\n        alertCol: \"danger\",\n        errMessage: errMess\n      });\n    });\n  }\n\n  addUser(e) {\n    e.preventDefault();\n    const newUser = {\n      username: this.state.username,\n      password: this.state.password,\n      email: this.state.email\n    };\n    axios.post(\"/api/users/\", newUser).then(({\n      data\n    }) => {\n      console.log(data);\n      this.props.updateUser(data.user).then(() => {\n        window.location = \"/\";\n      });\n      this.setState({\n        alert: false\n      });\n    }).catch(err => {\n      var _err$response2, _err$response2$data, _err$response2$data$e;\n\n      let errMess = \"\";\n      errMess = err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : (_err$response2$data$e = _err$response2$data.err) === null || _err$response2$data$e === void 0 ? void 0 : _err$response2$data$e.name;\n      if (errMess === undefined) errMess = \"Something went wrong\";else if (errMess === \"UserExistsError\") errMess = \"User Already Exists\";else if (errMess === \"IncorrectPasswordError\") errMess = \"Incorrect Password\";\n      this.setState({\n        alert: true,\n        alertCol: \"danger\",\n        errMessage: errMess\n      });\n      this.setState({\n        alert: true,\n        errMessage: errMess,\n        alertCol: \"danger\"\n      });\n      console.log(err.response);\n    });\n    this.toggleModal();\n  }\n\n  componentDidMount() {\n    if (this.props.user) window.location = \"/\";\n  }\n\n  toggleError() {\n    this.setState({\n      alert: !this.state.alert\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-3 mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      color: this.state.alertCol,\n      fade: true,\n      toggle: this.toggleError,\n      isOpen: this.state.alert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, this.state.errMessage)), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"form\",\n      className: \"p-4 my-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        fontFamily: \"Kaushan Script\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, \"Username : \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.username,\n      onChange: this.onChangeUsername,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    }, \"Password : \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      required: true,\n      className: \"form-control\",\n      value: this.state.password,\n      onChange: this.onChangePassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, \"New to\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontFamily: \"Monoton\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, \"BlogIsta ?\"), \" \", /*#__PURE__*/React.createElement(Button, {\n      className: \"btn btn-sm\",\n      color: \"success\",\n      onClick: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }, \"Sign Up\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Login\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.isModalOpen,\n      fade: false,\n      toggle: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"Sign Up\"), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.addUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 33\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"username\",\n      onChange: this.onChangeUsername,\n      name: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 33\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"email\",\n      onChange: this.onChangeEmail,\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      id: \"password\",\n      onChange: this.onChangePassword,\n      name: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(ModalFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      value: \"submit\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 29\n      }\n    }, \"Sign Up\")))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/win 10/Desktop/BlogIsta Project/blogapp-frontend/src/compenents/login.component.js"],"names":["React","Component","Label","Form","Button","FormGroup","Input","Modal","ModalHeader","ModalFooter","ModalBody","Alert","axios","login","constructor","props","onChangePassword","bind","onChangeUsername","onChangeEmail","onSubmit","toggleModal","toggleError","addUser","state","username","password","email","alert","isModalOpen","errMessage","alertCol","e","setState","target","value","preventDefault","user","post","then","res","updateUser","data","window","location","catch","err","console","log","response","errMess","name","undefined","newUser","componentDidMount","render","fontFamily"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n    Label,\n    Form,\n    Button,\n    FormGroup,\n    Input,\n    Modal,\n    ModalHeader,\n    ModalFooter,\n    ModalBody,\n    Alert,\n} from \"reactstrap\";\nimport axios from \"axios\";\nexport default class login extends Component {\n    constructor(props) {\n        super(props);\n        this.onChangePassword = this.onChangePassword.bind(this);\n        this.onChangeUsername = this.onChangeUsername.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.toggleModal = this.toggleModal.bind(this);\n        this.toggleError = this.toggleError.bind(this);\n        this.addUser = this.addUser.bind(this);\n        this.state = {\n            username: \"\",\n            password: \"\",\n            email: \"\",\n            alert: false,\n            isModalOpen: false,\n            errMessage: \"\",\n            alertCol: \"danger\",\n        };\n    }\n    onChangeUsername(e) {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n    onChangePassword(e) {\n        this.setState({\n            password: e.target.value,\n        });\n    }\n    onChangeEmail(e) {\n        this.setState({\n            email: e.target.value,\n        });\n    }\n    toggleModal() {\n        this.setState({\n            isModalOpen: !this.state.isModalOpen,\n        });\n    }\n    onSubmit(e) {\n        e.preventDefault();\n        const user = {\n            username: this.state.username,\n            password: this.state.password,\n        };\n        // console.log(this.props)x\n        axios\n            .post(\"/api/users/login\", user)\n            .then((res) => {\n                this.props.updateUser(res.data.user).then(() => {\n                    window.location = \"/\";\n                });\n            })\n            .catch((err) => {\n                console.log(err.response);\n                let errMess = \"\";\n                errMess = err?.response?.data?.err?.name;\n                if (errMess === undefined) errMess = \"Something went wrong\";\n                else if (errMess === \"IncorrectUsernameError\")\n                    errMess = \"Incorrect Username\";\n                else if (errMess === \"IncorrectPasswordError\")\n                    errMess = \"Incorrect Password\";\n                this.setState({\n                    alert: true,\n                    alertCol: \"danger\",\n                    errMessage: errMess,\n                });\n            });\n    }\n    addUser(e) {\n        e.preventDefault();\n        const newUser = {\n            username: this.state.username,\n            password: this.state.password,\n            email: this.state.email,\n        };\n        axios\n            .post(\"/api/users/\", newUser)\n            .then(({ data }) => {\n                console.log(data);\n                this.props.updateUser(data.user).then(() => {\n                    window.location = \"/\";\n                });\n                this.setState({\n                    alert: false,\n                });\n            })\n            .catch((err) => {\n                let errMess = \"\";\n                errMess = err?.response?.data?.err?.name;\n                if (errMess === undefined) errMess = \"Something went wrong\";\n                else if (errMess === \"UserExistsError\")\n                    errMess = \"User Already Exists\";\n                else if (errMess === \"IncorrectPasswordError\")\n                    errMess = \"Incorrect Password\";\n                this.setState({\n                    alert: true,\n                    alertCol: \"danger\",\n                    errMessage: errMess,\n                });\n                this.setState({\n                    alert: true,\n                    errMessage: errMess,\n                    alertCol: \"danger\",\n                });\n                console.log(err.response);\n            });\n        this.toggleModal();\n    }\n    componentDidMount() {\n        if (this.props.user) window.location = \"/\";\n    }\n    toggleError() {\n        this.setState({\n            alert: !this.state.alert,\n        });\n    }\n    render() {\n        return (\n            <div>\n                <div className='p-3 mt-1'>\n                    <Alert\n                        color={this.state.alertCol}\n                        fade={true}\n                        toggle={this.toggleError}\n                        isOpen={this.state.alert}>\n                        {this.state.errMessage}\n                    </Alert>\n                </div>\n\n                <div id='form' className='p-4 my-4'>\n                    <h1 style={{ fontFamily: \"Kaushan Script\" }}>Login</h1>\n                    <Form onSubmit={this.onSubmit}>\n                        <div className='form-group'>\n                            <Label>Username : </Label>\n                            <input\n                                type='text'\n                                required\n                                className='form-control'\n                                value={this.state.username}\n                                onChange={this.onChangeUsername}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <Label>Password : </Label>\n                            <input\n                                type='password'\n                                required\n                                className='form-control'\n                                value={this.state.password}\n                                onChange={this.onChangePassword}\n                            />\n                        </div>\n                        <div className='form-group'>\n                            New to{\" \"}\n                            <span\n                                style={{\n                                    fontFamily: \"Monoton\",\n                                }}>\n                                BlogIsta ?\n                            </span>{\" \"}\n                            <Button\n                                className='btn btn-sm'\n                                color='success'\n                                onClick={this.toggleModal}>\n                                Sign Up\n                            </Button>\n                        </div>\n                        <div className='form-group'>\n                            <input\n                                type='submit'\n                                value='Login'\n                                className='btn btn-primary'\n                            />\n                        </div>\n                    </Form>\n                </div>\n                <Modal\n                    isOpen={this.state.isModalOpen}\n                    fade={false}\n                    toggle={this.toggleModal}>\n                    <ModalHeader toggle={this.toggleModal}>\n                        Sign Up\n                    </ModalHeader>\n                    <Form onSubmit={this.addUser}>\n                        <ModalBody>\n                            <FormGroup>\n                                <Label htmlFor='username'>Username</Label>\n                                <Input\n                                    type='text'\n                                    id='username'\n                                    onChange={this.onChangeUsername}\n                                    name='username'\n                                />\n                            </FormGroup>\n                            <FormGroup>\n                                <Label htmlFor='email'>Email</Label>\n                                <Input\n                                    type='text'\n                                    id='email'\n                                    onChange={this.onChangeEmail}\n                                    name='email'\n                                />\n                            </FormGroup>\n                            <FormGroup>\n                                <Label htmlFor='password'>Password</Label>\n                                <Input\n                                    type='password'\n                                    id='password'\n                                    onChange={this.onChangePassword}\n                                    name='password'\n                                />\n                            </FormGroup>\n                        </ModalBody>\n                        <ModalFooter>\n                            <Button\n                                type='submit'\n                                value='submit'\n                                color='primary'>\n                                Sign Up\n                            </Button>\n                        </ModalFooter>\n                    </Form>\n                </Modal>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}